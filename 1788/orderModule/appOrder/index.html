<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta type="description" content="总代理-订单管理">
    <title>APP订单</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../plugs/layui/css/layui.css">
    <link rel="stylesheet" href="../../font/font_399822_dtv8v5xokcfvfgvi/iconfont.css">
    <link rel="stylesheet" href="../../font/font_399822_zixjpxd585btke29/iconfont.css">
    <link rel="stylesheet" href="../../css/background-style/background-common.css">
    <link rel="stylesheet" href="../../css/background-style/background-option.css">
    <link rel="stylesheet" href="../../css/background-style/main.css">
    <link rel="stylesheet" href="../../css/background-style/aside.css">
    <link rel="stylesheet" href="../../css/appOrder/app-order.css">
</head>
<body>
<!--顶部导航开始-->
<header>
    <ul class="layui-nav container" id="commonHeader">
        <li class="layui-nav-item user-name" id="userCenter">
        </li>

    </ul>
</header>
<!--顶部导航结束-->
<!--商品中心区域开始-->
<div class="option-container">
    <div class="option container">
        <div class="logo layui-inline">
            <a href="javascript:;">
                <img src="../../img/work-logo.png" alt="">
            </a>
        </div>
        <div class="products-center layui-inline">
            <a href="../../productModule/center/index.html">
                <img src="../../img/products-center.png" alt="">
            </a>
        </div>
        <div class="supply-center" id="applyBox">
            <button class="layui-btni">我要供货</button>
        </div>
    </div>
</div>
<!--商品中心区域结束-->

    <div class="main container">
        <!--左侧导航开始-->
        <aside>
            <ul class="layui-nav layui-nav-tree layui-nav-side">
                <li class="layui-nav-item">
                    <a href="javasript:;">
                        <i class="layui-icon iconfont">&#xe6db;</i>
                        <span>订单中心</span>
                    </a>
                    <dl class="layui-nav-child">
                        <dt>订单中心</dt>
                        <dd><a href="#">我的订单</a> </dd>
                        <dd><a href="#">售后管理</a> </dd>
                        <dd><a href="#">APP订单</a> </dd>
                    </dl>
                </li> <li class="layui-nav-item">
                    <a href="javasript:;">
                        <i class="layui-icon iconfont">&#xe609;</i>
                        <span>进货单</span>
                    </a>
                </li>
                <li class="layui-nav-item">
                    <a href="javasript:;">
                        <i class="layui-icon iconfont">&#xe612;</i>
                        <span>收藏中心</span>
                    </a>
                    <dl class="layui-nav-child">
                        <dt>收藏中心</dt>
                        <dd><a href="#">收藏的商品</a> </dd>
                        <dd><a href="#">收藏的供应商</a> </dd>
                    </dl>
                </li>
                <li class="layui-nav-item">
                    <a href="javasript:;">
                        <i class="layui-icon iconfont">&#xe6a2;</i>
                        <span>资产中心</span>
                    </a>
                    <dl class="layui-nav-child">
                        <dt>资产中心</dt>
                        <dd><a href="#">充值</a> </dd>
                        <dd><a href="#">提现</a> </dd>
                        <dd><a href="#">转账</a> </dd>
                        <dd><a href="#">银行卡管理</a> </dd>
                        <dd><a href="#">账户余额</a> </dd>
                    </dl>
                </li>
                <li class="layui-nav-item">
                    <a href="javasript:;">
                        <i class="layui-icon iconfont">&#xe607;</i>
                        <span>用户中心</span>
                    </a>
                    <dl class="layui-nav-child">
                        <dt>用户中心</dt>
                        <dd><a href="#">员工管理</a> </dd>
                        <dd><a href="#">岗位管理</a> </dd>
                    </dl>
                </li>
                <li class="layui-nav-item">
                    <a href="javasript:;">
                        <i class="layui-icon iconfont">&#xe601;</i>
                        <span>报表分析</span>
                    </a>
                    <dl class="layui-nav-child">
                        <dt>报表分析</dt>
                        <dd><a href="#">采购分析图</a> </dd>
                        <dd><a href="#">收货订单明细表</a> </dd>
                        <dd><a href="#">商品排行榜</a> </dd>
                    </dl>
                </li><li class="layui-nav-item">
                    <a href="javasript:;">
                        <i class="layui-icon iconfont">&#xe661;</i>
                        <span>服务中心</span>
                    </a>
                    <dl class="layui-nav-child">
                        <dt>服务中心</dt>
                        <dd><a href="#">意见建议</a> </dd>
                        <dd><a href="#">举报中心</a> </dd>
                    </dl>
                </li>
                <li class="layui-nav-item">
                    <a href="javasript:;">
                        <i class="layui-icon iconfont">&#xe614;</i>
                        <span>设置</span>
                    </a>
                    <dl class="layui-nav-child">
                        <dt>设置</dt>
                        <dd><a href="#">个人信息</a> </dd>
                        <dd><a href="#">收货地址</a> </dd>
                    </dl>
                </li><li class="layui-nav-item">
                    <a href="javasript:;">
                        <i class="layui-icon iconfont">&#xe661;</i>
                        <span>工厂目录</span>
                    </a>
                </li>
            </ul>
        </aside>
        <!--左侧导航结束-->
        <!--主体内容开始-->
        <!--<div class="bakground-content container">
            <table>
                <thead>
                    <tr>
                        <th>订单详情</th>
                        <th>数量</th>
                        <th>单价</th>
                        <th>金额</th>
                    </tr>
                </thead>
                <tbody class="layui-even">
                    <tr class="empty-space">
                        <td colspan="4"></td>
                    </tr>
                    <tr class="order-info">
                        <td colspan="4">
                            <input type="checkbox">
                            <span>2017-02-03 09:23</span>
                            <span>订单编号：xxxxxx</span>
                            <span>收件人：xxx</span>
                            <span>联系方式：xxxxxx</span>
                            <span>收货地址：xxxxxxxxxxxx</span>
                            <span>总金额：2000.00</span>
                            <span>待发货</span>
                            <button class="layui-btn layui-btn-mini deliver-goods b-btn">发货</button>
                        </td>
                    </tr>
                    <tr class="product-info">
                        <td>
                            <input type="checkbox">
                            <img src="./img/ys1.png" alt="" class="product-image">
                            <p class="product-dec"><a href="javascript:;">新款格纹头层牛皮女包韩版双铆钉双肩包女真皮背包一件代发学院风,新款格纹头层牛皮女包韩版双铆钉双肩包女真皮背包一件代发学院风</a></p>
                            <p class="product-detail">规格型号</p>
                            <p class="product-detail">最小起订量:10箱</p>
                            <p class="isInvalid">商品已失效</p>
                        </td>
                        <td><span class="prduct-number">X</span><span class="number">100</span></td>
                        <td><span class="product-price">￥</span><span class="price">484.00</span></td>
                        <td><span class="product-money">￥</span><span class="money">15628.00</span></td>
                    </tr>
                    <tr class="shipping-info">
                        <td colspan="4">
                            <p><span>物流信息物流公司:德邦物流</span><span>物流单号:5361350888</span></p>
                            <p>备注:尽快发货</p>
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>-->

        <div id="appOrderTable" class="bakground-content container">

        </div>
        <div id="pageBox" style="float: right;"></div>

        <!--主体内容结束-->
    </div>
    <script type="text/html" id="appOrderTemplate">
    	 <table>
          <thead>
              <tr>
                  <th>订单详情</th>
                  <th>数量</th>
                  <th>单价</th>
                  <th>金额</th>
              </tr>
          </thead>
          <tbody class="layui-even">
              <tr class="empty-space">
                  <td colspan="4"></td>
              </tr>
              {{# layui.each(d, function(index, item){ }}
              <tr class="order-info">
                  <td colspan="4">
                      <input type="checkbox">
                    	{{# if(item.createTime){  var itemTime = layui.woLianw.transDateType(item.createTime); }}
                    			<span>{{ itemTime }}</span>
                      {{#  }  }}
                      <span>订单编号：{{ item.orderItemNo }}</span>
                      <span>收件人：{{ item.buyer }}</span>
                      <span>联系方式：{{ item.contactWay }}</span>
                      <span>收货地址：{{ item.address }}</span>
                      <span>总金额：{{ item.totalPrice }}</span>
                      {{#  if(item.orderStatusCode === 0){  }}
                      <button class="layui-btn layui-btn-mini deliver-goods b-btn">发货</button>
                      {{#  }else if(item.orderStatusCode === 1){ }}
                      <span>已发货</span>
                      {{#  }  }}

                  </td>
              </tr>
              <tr class="product-info">
                  <td>
                      <input type="checkbox">
                      <img src="../../img/ys1.png" alt="" class="product-image">
                      <p class="product-dec"><a href="javascript:;">{{ item.skuDesc }}</a></p>
                      <p class="product-detail">规格型号</p>
                      <p class="product-detail">最小起订量:{{ item.minOrderNum }}箱</p>
                      <p class="isInvalid">商品已失效</p>
                  </td>
                  <td><span class="prduct-number">X</span><span class="number">{{ item.quantity }}</span></td>
                  <td><span class="product-price">￥</span><span class="price">{{ item.unitPrice }}</span></td>
                  <td><span class="product-money">￥</span><span class="money">{{ item.totalPrice }}</span></td>
              </tr>
              <tr class="shipping-info">
                  <td colspan="4">
                      <p><span>物流信息物流公司: {{ item.logisticsInformation }}</span><span>物流单号:{{ item.logisticsNum }}</span></p>
                      <p>备注:{{ item.note }}</p>
                  </td>
              </tr>
              {{# }) }}
          </tbody>
      </table>
    </script>
    <script src="../../plugs/layui/layui.all.js"></script>
    <script src="../../js/wolianwComponent/config.js"></script>
    <script>
        layui.use(['element','form','laydate','laytpl', 'layer', "woLianw", "laypage"],function () {
            var element=layui.element;
            var form=layui.form;
            var laydate=layui.laydate;
            var laytpl=layui.laytpl;
            var woLianw = layui.woLianw;
            var $=layui.$;
            var layer=layui.layer;
            var laypage=layui.laypage;
            var jsonName = JSON.parse(window.localStorage.getItem('name'));
            var moduleList = JSON.parse(window.localStorage.getItem('moduleList'));

            /*我要供货按钮的显示控制 start*/
            var loginInfo = JSON.parse(window.localStorage.getItem('1788login'))
            if(!loginInfo){
                window.location.href = '/login.html'
                return false
            }
            if(loginInfo.isSwitch){
                var str = '<button class="layui-btni" id="wantApply">我要供货</button>'
                $('#applyBox').append(str)
            }
            /*我要供货的登录切换*/
            $('#applyBox').on('click','#wantApply',function () {
                console.log(111)
                woLianw.switchLogin()
            })
            /*我要供货按钮的显示控制 end*/

            woLianw.setHeight()

            renderPageData('pageBox',"resultdiv", "./json/appOrder.json");  //http://192.168.3.46:8002/order/disPaging

            function renderAddressList(data) {
		            var appOrderTemplate=document.getElementById("appOrderTemplate").innerHTML
		            var appOrderTable=document.getElementById("appOrderTable")
		            laytpl(appOrderTemplate).render(data, function (html) {
		                appOrderTable.innerHTML=html
		            })
		        }

            function renderPageData(laypageDivId, resultContentId, url, parameter){
							if(!parameter){
								parameter = {
									page : 1,
									limit : 3
								}
							}
							$.ajax({
								url : url,
								method : 'get',
								data : parameter,
								async : true,
								complete : function (XHR, TS){},
								error : function(XMLHttpRequest, textStatus, errorThrown) {
									if("error"==textStatus){
										error("服务器未响应，请稍候再试");
									}else{
										error("操作失败，textStatus="+textStatus);
									}
								},
								success : function(data) {
									var jsonObj;
									typeof data == "object" ? jsonObj = data : jsonObj = JSON.parse(data);
									var dataLists = jsonObj.data.list;

//									for(var i=0; len=dataLists.length, i<len; i++){
//										if(dataLists[i].createTime){
//											dataLists[i].createTime = woLianw.transDateType(dataLists[i].createTime); //格式化时间
//										}
//									}
									renderAddressList(dataLists);

									//重新初始化分页插件
										laypage.render({
										    elem : laypageDivId,//存放分页的div盒子 ID
										    count: dataLists.length,//数据总数
										    pages: Math.ceil(jsonObj.length / parameter.limit), //计算总共多少页
										    limit: parameter.limit,//限制每页显示多少数据
										    limits: [5, 10, 20],//定义下拉框里面 可供选择的 每页显示多少条数据
				//						    theme: '#1E9FFF',//自定义分页样式
										    first: '首页',
						    				last: '尾页',
										    layout: ['count', 'skip', "first", 'prev', 'page', 'next', "last", 'limit'],//分页排版
										    jump: function(obj, first){//obj是一个object类型。包括了分页的所有配置信息。
										    	parameter.page = obj.curr;
										    	if(!first){//first一个Boolean类，检测页面是否初始加载。非常有用，可避免无限刷新。
										    		renderAddressList(dataLists);
										    	}
									      }
										});
								}
							});
						};






        })
    </script>
</body>
</html>
